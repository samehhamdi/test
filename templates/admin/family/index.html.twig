{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} | {% trans %} Families {% endtrans %}{% endblock %}

{% block body %}

    <section class="container pt-5">
        <div>
            <h1 class="d-inline-block"> {% trans %} Families {% endtrans %}</h1>
            <a href="{{ path('family_new') }}" class="text-blue" data-toggle="tooltip" title="Add new"><i class="icon icon-md material-icons-add_circle icon-shift-2"></i></a>
        </div>
        <p>
            <span class="hint"> {% trans %}Click on the job family name to show the list of disciplines.{% endtrans %}</span>
            <span class="hint">{% trans %}You can also drag & drop each job family to change the display order.{% endtrans %}</span>
        </p>
        <div class="list-header text-right">
            
        </div>
        <div class="tree">
            <div class="list">
            {% for family in families %}
                <div class="item droppable" data-id="{{family.id}}">
                    <div class="item-inner">
                        <a href="#" class="title toggle-disciplies">{{ family.titleEn }}</a>
                        <span class="actions float-right">
                            <a href="{{ path('family_edit', {'id': family.id}) }}" class="edit-link"><i class="icon icon-sm mdi mdi-pencil-box"></i></a>
                            <a href="#" class="delete-link" onclick="confirm('Are you sure ?');"><i class="icon icon-sm mdi mdi-delete"></i></a>
                        </span>
                    </div>
                    <ul class="disciplines">
                    {% for discipline in family.disciplines %}
                        <li class="item draggable" data-action="{{ path('update_discipline_family', {'id': discipline.id}) }}">
                            <span class="dragHandler"><i class="icon mdi mdi-drag-vertical icon-sm"></i></span>
                            <span class="actions float-right">
                                <a href="{{ path('discipline_edit', {'id': discipline.id}) }}" class="edit-link"><i class="icon mdi mdi-pencil-box"></i></a>
                                <a href="#" class="delete-link" onclick="confirm('Are you sure ?');"><i class="icon mdi mdi-delete"></i></a>
                            </span>
                            <span class="title">{{ discipline.titleEn }}</span>
                            <div class="skills">
                            {% for skillD in discipline.disciplinesd %}
                                <a href="{{ path('skill_edit', {'id': skillD.skill.id}) }}" class="tag">{{ skillD.skill.titleEn }}</a>
                            {% endfor %}
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            {% endfor %}
    </section>
{% endblock %}